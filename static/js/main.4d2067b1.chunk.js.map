{"version":3,"sources":["CustomArgs.js","useColorScheme.js","ColorSchemeToggle.js","config.js","App.js","index.js"],"names":["unwrapOutputType","outputType","unwrappedType","isWrappingType","ofType","makeDefaultArg","parentField","arg","type","name","startsWith","endsWith","getDefaultScalarArgValue","argType","kind","value","isEnumType","getValues","map","x","includes","GraphiQLExplorer","defaultValue","useColorSchemeState","createPersistedState","ColorSchemeToggle","systemPrefersDark","useMediaQuery","query","undefined","isDark","setIsDark","useMemo","useEffect","document","documentElement","classList","add","remove","useColorScheme","React","createElement","GraphiQL","Button","label","title","onClick","APP_ID","auth","OneGraphAuth","appId","config","fetchOneGraph","params","fetch","method","headers","authHeaders","body","JSON","stringify","then","response","text","responseBody","parse","e","App","props","handleEditQuery","setState","handleToggleExplorer","explorerIsOpen","state","handleLogin","isLoggedIn","Config","logout","result","console","log","login","catch","error","graphiql","schema","getIntrospectionQuery","editor","getQueryEditor","setOption","options","extraKeys","handleInspectOperation","buildClientSchema","data","cm","mousePos","this","parsedQuery","operationKind","operationName","token","getTokenAt","start","line","ch","end","position","indexFromPos","def","definitions","find","definition","loc","operation","selector","el","querySelector","scrollIntoView","className","onEdit","onRunOperation","handleRunQuery","onToggleExplorer","ref","fetcher","onEditQuery","Toolbar","handlePrettifyQuery","handleToggleHistory","Component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4d2067b1.chunk.js","sourcesContent":["import GraphiQLExplorer from 'graphiql-explorer';\nimport { isEnumType, isWrappingType } from 'graphql';\n\nfunction unwrapOutputType(outputType) {\n  let unwrappedType = outputType;\n  while (isWrappingType(unwrappedType)) {\n    unwrappedType = unwrappedType.ofType;\n  }\n  return unwrappedType;\n}\n\nexport function makeDefaultArg(\n  parentField,\n  arg,\n) {\n  const unwrappedType = unwrapOutputType(parentField.type);\n  if (\n    unwrappedType.name.startsWith('GitHub')\n    && unwrappedType.name.endsWith('Connection')\n    && (arg.name === 'first' || arg.name === 'orderBy')\n  ) {\n    return true;\n  }\n  return false;\n}\n\nexport function getDefaultScalarArgValue(\n  parentField,\n  arg,\n  argType,\n) {\n  const unwrappedType = unwrapOutputType(parentField.type);\n  switch (unwrappedType.name) {\n    case 'GitHubRepository':\n      if (arg.name === 'name') {\n        return { kind: 'StringValue', value: 'graphql-js' };\n      } if (arg.name === 'owner') {\n        return { kind: 'StringValue', value: 'graphql' };\n      }\n      break;\n    case 'NpmPackage':\n      if (arg.name === 'name') {\n        return { kind: 'StringValue', value: 'graphql' };\n      }\n      break;\n    default:\n      if (\n        isEnumType(argType)\n        && unwrappedType.name.startsWith('GitHub')\n        && unwrappedType.name.endsWith('Connection')\n      ) {\n        if (\n          arg.name === 'direction'\n          && argType\n            .getValues()\n            .map((x) => x.name)\n            .includes('DESC')\n        ) {\n          return { kind: 'EnumValue', value: 'DESC' };\n        } if (\n          arg.name === 'field'\n          && argType\n            .getValues()\n            .map((x) => x.name)\n            .includes('CREATED_AT')\n        ) {\n          return { kind: 'EnumValue', value: 'CREATED_AT' };\n        }\n      }\n      return GraphiQLExplorer.defaultValue(argType);\n  }\n  return GraphiQLExplorer.defaultValue(argType);\n}\n","import { useEffect, useMemo } from 'react';\nimport { useMediaQuery } from 'react-responsive';\nimport createPersistedState from 'use-persisted-state';\n\nconst useColorSchemeState = createPersistedState('colorScheme');\n\nexport default function useColorScheme() {\n  const systemPrefersDark = useMediaQuery(\n    {\n      query: '(prefers-color-scheme: dark)',\n    },\n    undefined,\n  );\n  const [isDark, setIsDark] = useColorSchemeState();\n  const value = useMemo(\n    () => (isDark === undefined ? !!systemPrefersDark : isDark),\n    [isDark, systemPrefersDark],\n  );\n  useEffect(() => {\n    if (value) {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  }, [value]);\n  return {\n    isDark: value,\n    setIsDark,\n  };\n}\n","import React from 'react';\nimport { GraphiQL } from 'graphiql';\nimport useColorScheme from './useColorScheme';\n\nconst ColorSchemeToggle = () => {\n  const { isDark, setIsDark } = useColorScheme();\n\n  return React.createElement(GraphiQL.Button, {\n    label: 'Theme',\n    title: 'Toggle Dark Mode',\n    onClick: () => setIsDark(!isDark),\n  });\n};\n\nexport default ColorSchemeToggle;\n","import OneGraphAuth from \"onegraph-auth\";\n\nconst APP_ID = \"bc178799-292e-49df-8016-223abf5a07cb\";\n\nconst auth = new OneGraphAuth({\n  appId: APP_ID\n});\n\n// This setup is only needed once per application\nconst fetchOneGraph = (params) => {\n  return fetch(\n    \"https://serve.onegraph.com/dynamic?app_id=\" + APP_ID,\n    {\n      method: \"POST\",\n      headers: {\n        ...auth.authHeaders()\n      },\n      body: JSON.stringify(params),\n    }\n  )\n      .then((response) => response.text())\n      .then((responseBody) => {\n          try {\n              return JSON.parse(responseBody);\n          } catch (e) {\n              return responseBody;\n          }\n      });\n};\n\nconst config = {auth: auth, appId: APP_ID, fetchOneGraph: fetchOneGraph};\n\nexport default config;\n","import React, { Component } from 'react';\nimport GraphiQL from 'graphiql';\nimport GraphiQLExplorer from 'graphiql-explorer';\nimport {buildClientSchema, getIntrospectionQuery, parse} from 'graphql';\n\nimport { makeDefaultArg, getDefaultScalarArgValue } from './CustomArgs';\nimport ColorSchemeToggle from './ColorSchemeToggle';\nimport Config from \"./config\";\n\nimport 'graphiql/graphiql.css';\nimport './App.css';\n\nconst DEFAULT_QUERY = `# shift-option/alt-click on a query below to jump to it in the explorer\n# option/alt-click on a field in the explorer to select all subfields\n\n  query IssuesBeforeQuery($owner: String!, $repo: String!, $cursor: String) {\n    gitHub {\n      repositoryOwner(login: $owner) {\n        repository(name: $repo) {\n          issues(first: 5, states: OPEN, orderBy: {field: CREATED_AT, direction: DESC}, before: $cursor) {\n            totalCount\n            data: edges {\n              cursor\n              node {\n                id\n                title\n                url\n                state\n                author {\n                  login\n                }\n                labels(first: 5) {\n                  data: edges {\n                    node {\n                      id\n                      name\n                      color\n                    }\n                  }\n                }\n                comments {\n                  totalCount\n                }\n                milestone {\n                  title\n                }\n                participants(first: 3) {\n                  totalCount\n                  nodes {\n                    login\n                    avatarUrl\n                  }\n                }\n                createdAt\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.graphiql = null;\n    this.state = {\n      schema: null,\n      query: DEFAULT_QUERY,\n      explorerIsOpen: true,\n      isLoggedIn: false,\n    };\n  }\n\n  componentDidMount() {\n    Config.fetchOneGraph({\n      query: getIntrospectionQuery(),\n    }).then((result) => {\n      const editor = this.graphiql.getQueryEditor();\n      editor.setOption('extraKeys', {\n        ...(editor.options.extraKeys || {}),\n        'Shift-Alt-LeftClick': this.handleInspectOperation,\n      });\n\n      this.setState({ schema: buildClientSchema(result.data) });\n    });\n\n    Config.auth.isLoggedIn('github').then((isLoggedIn) => this.setState({isLoggedIn}))\n  }\n\n  handleInspectOperation(\n    cm,\n    mousePos,\n  ) {\n    const { query } = this.state;\n    const parsedQuery = parse(query || '');\n\n    if (!parsedQuery) {\n      console.error(\"Couldn't parse query document\");\n      return null;\n    }\n\n    const token = cm.getTokenAt(mousePos);\n    const start = { line: mousePos.line, ch: token.start };\n    const end = { line: mousePos.line, ch: token.end };\n    const relevantMousePos = {\n      start: cm.indexFromPos(start),\n      end: cm.indexFromPos(end),\n    };\n\n    const position = relevantMousePos;\n\n    const def = parsedQuery.definitions.find((definition) => {\n      if (!definition.loc) {\n        console.log('Missing location information for definition');\n        return false;\n      }\n\n      const { loc } = definition;\n      return loc.start <= position.start && loc.end >= position.end;\n    });\n\n    if (!def) {\n      console.error(\n        'Unable to find definition corresponding to mouse position',\n      );\n      return null;\n    }\n\n    let operationKind;\n    if (def.kind === 'OperationDefinition') {\n      operationKind = def.operation;\n    } else {\n      operationKind = def.kind === 'FragmentDefinition'\n        ? 'fragment'\n        : 'unknown';\n    }\n\n    let operationName;\n    if (def.kind === 'OperationDefinition' && !!def.name) {\n      operationName = def.name.value;\n    } else {\n      operationName = def.kind === 'FragmentDefinition' && !!def.name\n        ? def.name.value\n        : 'unknown';\n    }\n\n    const selector = `.graphiql-explorer-root #${operationKind}-${operationName}`;\n\n    const el = document.querySelector(selector);\n    if (el !== null) {\n      el.scrollIntoView();\n    }\n\n    return false;\n  }\n\n  handleEditQuery = (query) => this.setState({ query });\n\n  handleToggleExplorer = () => {\n    this.setState({ explorerIsOpen: !this.state.explorerIsOpen });\n  };\n\n  handleLogin = () => {\n    const { isLoggedIn } = this.state;\n\n    if (isLoggedIn) {\n      Config.auth.logout('github').then((response) => {\n        if (response.result === 'success') {\n          console.log('Logout succeeded');\n          this.setState({ isLoggedIn: false });\n        } else {\n          console.log('Logout failed');\n        }\n      });\n    } else {\n      Config.auth\n          .login('github')\n          .then(() => {\n            Config.auth.isLoggedIn('github').then((isLoggedIn) => {\n              if (isLoggedIn) {\n                console.log('Successfully logged in to GitHub');\n                this.setState({ isLoggedIn: true });\n              } else {\n                console.log('Did not grant auth for GitHub');\n              }\n            });\n          })\n          .catch((e) => console.error('Problem logging in', e));\n    }\n  }\n\n  render() {\n    const { query, schema, explorerIsOpen, isLoggedIn } = this.state;\n\n    return (\n      <div className=\"graphiql-container\">\n        <GraphiQLExplorer\n          schema={schema}\n          query={query}\n          onEdit={this.handleEditQuery}\n          onRunOperation={(operationName) => this.graphiql.handleRunQuery(operationName)}\n          explorerIsOpen={explorerIsOpen}\n          onToggleExplorer={this.handleToggleExplorer}\n          getDefaultScalarArgValue={getDefaultScalarArgValue}\n          makeDefaultArg={makeDefaultArg}\n        />\n        <GraphiQL\n          ref={(ref) => { this.graphiql = ref; }}\n          fetcher={Config.fetchOneGraph}\n          schema={schema}\n          query={query}\n          onEditQuery={this.handleEditQuery}\n        >\n          <GraphiQL.Toolbar>\n            <GraphiQL.Button\n              onClick={() => this.graphiql.handlePrettifyQuery()}\n              label=\"Prettify\"\n              title=\"Prettify Query (Shift-Ctrl-P)\"\n            />\n            <GraphiQL.Button\n              onClick={() => this.graphiql.handleToggleHistory()}\n              label=\"History\"\n              title=\"Show History\"\n            />\n            <GraphiQL.Button\n              onClick={this.handleToggleExplorer}\n              label=\"Explorer\"\n              title=\"Toggle Explorer\"\n            />\n            <ColorSchemeToggle />\n            <GraphiQL.Button\n                onClick={this.handleLogin}\n                label={`Log ${isLoggedIn ? 'out of' : 'in to'} GitHub`}\n                title=\"GitHub\"\n            />\n          </GraphiQL.Toolbar>\n        </GraphiQL>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}